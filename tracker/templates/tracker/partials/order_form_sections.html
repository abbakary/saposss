{# Shared order form sections used in order_create and customer_register Step 4 #}

<div class="mt-3">
    {% with t=order_type %}
    
    {# SERVICE ORDER TYPE #}
    <div id="section-service" class="{% if t and t != 'service' %}d-none{% endif %}">
        <div class="row g-3">
              
       {% if not registration_summary_only %}
            {# Vehicle Information (Optional) #}
            <div class="col-12">
                <div class="card">
                    <div class="card-header">
                        <h6 class="mb-0">Vehicle Information </h6>
                    </div>
                    <div class="card-body">
                        <div class="row g-3">
                            <div class="col-md-3">
                                <label class="form-label">Plate Number</label>
                                <input type="text" name="plate_number" class="form-control" placeholder="e.g., T123ABC">
                            </div>
                            <div class="col-md-3">
                                <label class="form-label">Make</label>
                                <input type="text" name="make" class="form-control" placeholder="e.g., Toyota">
                            </div>
                            <div class="col-md-3">
                                <label class="form-label">Model</label>
                                <input type="text" name="model" class="form-control" placeholder="e.g., Corolla">
                            </div>
                            <div class="col-md-3">
                                <label class="form-label">Vehicle Type</label>
                                <select name="vehicle_type" class="form-select">
                                    <option value="">Select type</option>
                                    <option>Car</option>
                                    <option>SUV</option>
                                    <option>Truck</option>
                                    <option>Motorcycle</option>
                                    <option>Bus</option>
                                    <option>Van</option>
                                </select>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
            {% endif %}
               {% if not registration_summary_only %}
            {# Service Offered Selection #}
            <div class="col-12">
                <div class="card border-success">
                    <div class="card-header bg-success text-white">
                        <h6 class="mb-0"><i class="fa fa-list-check me-2"></i>Service Offered</h6>
                    </div>
                    <div class="card-body">
                        <div class="row g-3">
                            {% for checkbox in form.service_selection %}
                            <div class="col-md-4">
                                <div class="form-check">
                                    {{ checkbox.tag }}
                                    <label class="form-check-label" for="{{ checkbox.id_for_label }}">{{ checkbox.choice_label }}</label>
                                </div>
                            </div>
                            {% endfor %}
                        </div>
                        {% if form.service_selection.errors %}
                        <div class="text-danger f-12 mt-2">{{ form.service_selection.errors|striptags }}</div>
                        {% endif %}
                    </div>
                </div>
            </div>
            {% endif %}

            {% if not registration_summary_only %}
            {# Service Description and Duration #}
            <div class="col-md-8">
                <label class="form-label">{{ form.description.label }}</label>
                {{ form.description }}
                {% if form.description.errors %}
                <div class="text-danger f-12">{{ form.description.errors|striptags }}</div>
                {% endif %}
            </div>
            <div class="col-md-4">
                <label class="form-label">{{ form.estimated_duration.label }}</label>
                {{ form.estimated_duration }}
                {% if form.estimated_duration.errors %}
                <div class="text-danger f-12">{{ form.estimated_duration.errors|striptags }}</div>
                {% endif %}
            </div>
            {% endif %}
            
        </div>
    </div>

    {# SALES ORDER TYPE #}
    <div id="section-sales" class="{% if t and t != 'sales' %}d-none{% endif %}">
        <div class="row g-3">
    
    
            {# Item Details #}
            <div class="col-md-12">
                <label class="form-label">Select Item</label>
                {{ form.item_name }}
                {{ form.brand }}
                {% if form.item_name.errors %}
                <div class="text-danger f-12">{{ form.item_name.errors|striptags }}</div>
                {% endif %}
                <small class="text-muted">Item name and brand will be automatically filled</small>
            </div>
            
            <div class="col-md-4">
                <label class="form-label">{{ form.quantity.label }}</label>
                {{ form.quantity }}
                {% if form.quantity.errors %}
                <div class="text-danger f-12">{{ form.quantity.errors|striptags }}</div>
                {% endif %}
            </div>
            
            {{ form.tire_type }}
               {# Tire Service Add-ons #}
            <div class="col-12">
                <div class="card border-warning">
                    <div class="card-header bg-warning text-dark">
                        <h6 class="mb-0"><i class="fa fa-list-check me-2"></i>Tire Service Add-ons</h6>
                    </div>
                    <div class="card-body">
                        <div class="row g-3">
                            <div class="col-md-3">
                                <div class="form-check">
                                    <input class="form-check-input" type="checkbox" id="oc_ts_install" name="tire_services" value="install">
                                    <label class="form-check-label" for="oc_ts_install">Install Tires</label>
                                </div>
                            </div>
                            <div class="col-md-3">
                                <div class="form-check">
                                    <input class="form-check-input" type="checkbox" id="oc_ts_balance" name="tire_services" value="balancing">
                                    <label class="form-check-label" for="oc_ts_balance">Wheel Balancing</label>
                                </div>
                            </div>
                            <div class="col-md-3">
                                <div class="form-check">
                                    <input class="form-check-input" type="checkbox" id="oc_ts_align" name="tire_services" value="alignment">
                                    <label class="form-check-label" for="oc_ts_align">Wheel Alignment</label>
                                </div>
                            </div>
                            <div class="col-md-3">
                                <div class="form-check">
                                    <input class="form-check-input" type="checkbox" id="oc_ts_dispose" name="tire_services" value="disposal">
                                    <label class="form-check-label" for="oc_ts_dispose">Old Tire Disposal</label>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
            
            {% if not registration_summary_only %}
            <div class="col-12">
                <label class="form-label">{{ form.description.label }}</label>
                {{ form.description }}
                {% if form.description.errors %}
                <div class="text-danger f-12">{{ form.description.errors|striptags }}</div>
                {% endif %}
            </div>
            {% endif %}
            
        </div>
    </div>

    {# inquiry ORDER TYPE #}
    <div id="section-inquiry" class="{% if t and t != 'inquiry' %}d-none{% endif %}">
        <div class="row g-3">
            
            <div class="col-md-6">
                <label class="form-label">{{ form.inquiry_type.label }}</label>
                {{ form.inquiry_type }}
                {% if form.inquiry_type.errors %}
                <div class="text-danger f-12">{{ form.inquiry_type.errors|striptags }}</div>
                {% endif %}
            </div>
            
            <div class="col-md-6">
                <label class="form-label">{{ form.contact_preference.label }}</label>
                {{ form.contact_preference }}
                {% if form.contact_preference.errors %}
                <div class="text-danger f-12">{{ form.contact_preference.errors|striptags }}</div>
                {% endif %}
            </div>
            
            <div class="col-md-12">
                <label class="form-label">{{ form.questions.label }}</label>
                {{ form.questions }}
                {% if form.questions.errors %}
                <div class="text-danger f-12">{{ form.questions.errors|striptags }}</div>
                {% endif %}
            </div>
            
          
            
        </div>
    </div>
    
    {% endwith %}
</div>

<style>
.form-check {
    padding: 10px;
    border: 1px solid #e0e0e0;
    border-radius: 6px;
    margin-bottom: 8px;
    transition: all 0.2s ease;
    height: 100%;
}
.form-check:hover {
    background-color: #f8f9fa;
    border-color: #0d6efd;
}
.form-check-input:checked + .form-check-label {
    font-weight: 600;
    color: #0d6efd;
}
.form-check-input {
    margin-top: 0.3em;
}
</style>
